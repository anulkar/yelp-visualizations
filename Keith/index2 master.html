<html>
<head>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-core.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-cartesian.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-data-adapter.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
<div id="container">

<script>
d3.json("yelp_toronto_stars_summary2_records.json").then(function(yelpdata) {
    console.log(yelpdata);
    var ydata = yelpdata
    var businesscounts = ydata.map(row => row.businesses_count)
    console.log(businesscounts)
    var yelpstars= ydata.map(row=> row.stars)
    console.log(yelpstars)

// Create Dataset using anychary.js Library
  
var dataset = anychart.data.set(ydata);
  //console.log(dataset);
  // Map data
  var mapping = dataset.mapAs({x:"stars", value:"businesses_count"});

  // create the chart
  var chart = anychart.bar(mapping);

  
  chart.xAxis().title("Stars");//create name for X axis
  chart.yAxis().title("Business Count"); //create name for Y axis
  chart.data(yelpdata); //specify data source
  chart.yScale().stackMode('value');//setting percent stacking
  var legend = chart.legend(); 
  var barSpacing = 10; // desired space between each bar
  var scaleY = 10; // 10x scale on rect height
  // set the container
  chart.container("container"); //reference the container Id

  // Intiate drawing the chart

  chart.draw();

});
</script>
<div id="chartContainer" style="height: 300px; width: 100%;"></div>
</div>
</body>
</html>