<html>
<head>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-core.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-cartesian.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-data-adapter.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
<div id="container">

<script>
d3.json("yelp_toronto_stars_summary_records.json").then(function(yelpdata) {
    console.log(yelpdata);
    var ydata = yelpdata
    var businesscounts = ydata.map(row => row.businesses_count)
    console.log(businesscounts)
    var yelpstars= ydata.map(row=> row.stars)
    console.log(yelpstars)

// Create Dataset using anychary.js Library
  
var dataset = anychart.data.set(ydata);
  //console.log(dataset);
  // Map data
  var mapping = dataset.mapAs({x:"stars", value:"businesses_count"});


  
  //chart.xAxis().title("Stars");//create name for X axis
  //chart.yAxis().title("Business Count"); //create name for Y axis
  //chart.data(yelpdata); //specify data source
  //chart.yScale().stackMode('value');//setting percent stacking
  
  // create bar series
  // map the data
  var seriesData_1 = ydata.mapAs({x: 0, value: 1});
  var seriesData_2 = ydata.mapAs({x: 0, value: 2});
  var seriesData_3 = ydata.mapAs({x: 0, value: 3});
  var seriesData_4 = ydata.mapAs({x: 0, value: 4});
  var seriesData_5 = ydata.mapAs({x: 0, value: 5});
  var seriesData_6 = ydata.mapAs({x: 0, value: 6});
  var seriesData_7 = ydata.mapAs({x: 0, value: 7});
  var seriesData_8 = ydata.mapAs({x: 0, value: 8});
  var seriesData_9 = ydata.mapAs({x: 0, value: 9});
  var seriesData_10 = ydata.mapAs({x: 0, value: 10});
  var seriesData_11 = ydata.mapAs({x: 0, value: 11});
  var seriesData_12 = ydata.mapAs({x: 0, value: 12});
  var seriesData_13 = ydata.mapAs({x: 0, value: 13});
  var seriesData_14 = ydata.mapAs({x: 0, value: 14});
  var seriesData_15 = ydata.mapAs({x: 0, value: 15});
  var seriesData_16 = ydata.mapAs({x: 0, value: 16});
  var seriesData_17 = ydata.mapAs({x: 0, value: 17});
  var seriesData_18 = ydata.mapAs({x: 0, value: 18});
  var seriesData_19 = ydata.mapAs({x: 0, value: 19});
  var seriesData_20 = ydata.mapAs({x: 0, value: 20});
  var seriesData_21 = ydata.mapAs({x: 0, value: 21});
  var seriesData_22 = ydata.mapAs({x: 0, value: 22});

  // create the chart
  var chart = anychart.bar();

  // enable the value stacking mode
  chart.yScale().stackMode("value");

  // create area series, set the data
  var series1 = chart.bar(seriesData_1);
  var series2 = chart.bar(seriesData_2);
  var series3 = chart.bar(seriesData_3);
  var series4 = chart.bar(seriesData_4);
  var series5 = chart.bar(seriesData_5);
  var series6 = chart.bar(seriesData_6);
  var series7 = chart.bar(seriesData_7);
  var series8 = chart.bar(seriesData_8);
  var series9 = chart.bar(seriesData_9);
  var series10 = chart.bar(seriesData_10);
  var series11 = chart.bar(seriesData_11);
  var series12 = chart.bar(seriesData_12);
  var series13 = chart.bar(seriesData_13);
  var series14 = chart.bar(seriesData_14);
  var series15 = chart.bar(seriesData_15);
  var series16 = chart.bar(seriesData_16);
  var series17 = chart.bar(seriesData_17);
  var series18 = chart.bar(seriesData_18);
  var series19 = chart.bar(seriesData_19);
  var series20 = chart.bar(seriesData_20);
  var series21 = chart.bar(seriesData_21);
  var series22 = chart.bar(seriesData_22);

  // configure tooltips
  //chart.tooltip().format("{%value} ({%yPercentOfCategory}{decimalsCount:2}%)");

  // configure labels on the y-axis
  chart.yAxis().labels().format("{%value}");

  // set the chart title
  chart.title("Stacked Bar Chart");

  // set the container id
  chart.container("container");

  // initiate drawing the chart
  chart.draw();

});
</script>
<div id="container" style="height: 10%; width: 1%; margin: 0; padding: 0;"></div>
</div>
</body>
</html>